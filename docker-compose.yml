# https://docs.docker.com/compose/compose-file/

version: '3'
services:
  nodebb:
    build:
     context: .
     dockerfile: Dockerfile
    links:
     - redis
     - mongo
    image: nodebb
    ports:
     - "4567:4567"
    hostname: nodebb
    container_name: nodebb
    environment:
     - redis__host=redis
     - mongo__host=mongo
    volumes:
     - ./logs:/usr/src/app/logs
  redis:
    image: redis:5
    command: ["redis-server", "--appendonly", "yes"]
    hostname: redis
    logging:
      driver: none
  mongo:
    image: mongo:4
    command: ["mongod"]
    hostname: mongo
    logging:
      driver: none
